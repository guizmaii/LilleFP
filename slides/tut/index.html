<!DOCTYPE html>
<html>
<head>
    <title>Pure FP ?</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif', 'Helvetica'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz', 'Gill Sans';
        font-weight: normal;
      }
      table {
        border-collapse: collapse;
      }
      th, td {
        padding: 30px;
        border: 1px solid black;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono', 'Consolas', 'Courier New'; }
      .red { color: red; }
      .bold { font-weight: bold; }
      .center {
        text-align: center;
        margin-left: 5%;
        margin-right: 5%;
      }
    </style>
</head>
<body>
<textarea id="source">



class: center, middle

# Pure FP ?

 ü§î

### A journey from imperative OO to pure functional programming

Jules Ivanic ‚Ä¢ `@guizmaii`

???
- notes here
- see https://remarkjs.com/#1

---

# Who am I ?

## Jules Ivanic

 - 30 ans

 - Professional developer since 5 years.

 - Mostly Scala/FP developer today

 - Ex-CTO @ Colisweb

 - Passionate surfer since I'm 11. Leaving to Australia in June üåäüèÑ

???
Empty
---
# Summary

 1. Disclaimer

 2. Functional programming ?

 3. Impure FP ?

 4. Pure FP ?

 5. Conlusion

 6. Questions

---
# 1. Disclaimer

<br />
<br />
<br />

.center[

![Image](jdg_wisdom.png)

]

???
Apprendre est un processus personnel. Je ne peux rien vous apprendre.
Je peux vous montrer, vous expliquer mais la compr√©hension de ce que je vous montre/explique se passe dans votre t√™te.

Apprendre demande du travail personnel. Vous n'apprenez pas juste en regardant un talk.

Sur des sujets non triviaux, il faut que vous gagner votre propre "intuition".
C'est cette intuition qui vous permet de comprendre les choses complexes.

Je peux vous partager mon intuition, plus quelques autres si j'en connais d'autres.
Si une de ces intuitions vous parle, cool. Cela va vous permettre de comprendre.
Sinon, il va falloir que vous travailliez pour r√©ussir √† trouver votre propre intuition.
Ce processus peut-√™tre long. Cela d√©pend de plein de param√™tres: du sujet, de votre proximit√© avec celui-ci, etc.

Pour moi, cette notion d'"intuition" est essentiel, c'est pourquoi je tenais √† prendre ces deux minutes pour vous en parler.
---
# Imperative OO

```java
// I used to write things like that...

class Person {

  private String name;
  private Int age;
  private String address;

  public Person(String name, Int age, String address) {

    if (age < 0 || age > 120) {
      throw new RuntimeException("age is invalid");
    }

    this.name = name; this.age = age; this.address = address;
  }

  public String getName {
    return this.name;
  }

  public void setName(String name) {
    this.name = name;
  }

  ...
}
```
---
# (Synchronous) Imperative OO

```java
// I used to write things like that...

class PersonRepo {

  private DB dbInstance;

  public PersonRepo(DB dbInstance) {
    this.dbInstance = dbInstance;
  }

  public void savePerson(Person p, GpsPoint point) {
    dbInstance.query(
      "INSERT INTO PERSONS (name, age, address, gpsPoint) VALUES (?, ?, ?, ?)",
      p.name, p.age, p.address, point
    )
  }
}

// Or even worst... ü§¢

class PersonRepoSpring {

  @Inject
  private DB instance;

  ...
}
```
---
# (Synchronous) Imperative OO

```java
// I used to write things like that...

class GoogleService {

  private SyncHttpClient httpClient;

  public GoogleService(SyncHttpClient httpClient) {
    this.httpClient = httpClient;
  }

  public GpsPoint geocode(String address) {
    String res =
      httpClient
        .get("https://api.google.com/geocode/address")
        .body("{ \"address\": \"" + address + "\" }")
        .execute();

    parse(res);
  }
}
```
---
# (Synchronous) Imperative OO

```java
class Server extends FrameworkMagic {

  private GoogleService geocoder;
  private PersonRepo    repo;

  /**
    * Accepted JSON requests:
    *
    * { "name": "Jules", "age": 30, "address": "Sydney, Australia" }
    */
  @Put("/person")
  public HttpResponse createPerson(@Body Person person) {
    // TODO: Your mission, if you accept, is to code this method.
  }

}
```
---
# (Synchronous) Imperative OO

```java
@Put("/person")
public HttpResponse createPerson(@Body Person person) {

  GpsPoint point = geocoder.geocode(person.address);

  repo.savePerson(person, point);

  return HttpResponse.Created("Done üëç");
}
```
---
# (Synchronous) Imperative OO

```java
@Put("/person")
public HttpResponse createPerson(@Body Person person) {

  GpsPoint point = geocoder.geocode(person.address);

  repo.savePerson(person, point);

  return HttpResponse.Created("Done üëç");
}
```

<br />

.bold[Your nice ignorant boss ü§¥ :]  Nice work. Here's your üíµ

.bold[Me (your CTO) üë®‚Äçüè´ :] You're fired. You waste our money.
---
# (Synchronous) Imperative OO

```java
@Put("/person")
public HttpResponse createPerson(@Body Person person) {

  GpsPoint point = geocoder.geocode(person.address);

  repo.savePerson(person, point);

  return HttpResponse.Created("Done üëç");
}
```

<br />

Problems in this code:
  - No error handling
  - Synchronous
  - Uncontrolled side effects
  - mutable
---
# (Synchronous) Imperative OO

```java
@Put("/person")
public HttpResponse createPerson(@Body Person person) {

  GpsPoint point = geocoder.geocode(person.address);

  repo.savePerson(person, point);

  return HttpResponse.Created("Done üëç");
}
```

<br />

.bold[
Let's improve that piece of code!
]

We'll make it asynchronous and we'll handle errors in the same time

Thanks to ???
---
# [A]synchronous, [non-]blocking ? ü§î

<br />

.center[
|                     | Synchronous                          | Asynchronous                  |
|---------------------|--------------------------------------|-------------------------------|
| .bold[blocking]     | Waste LOTS OF CPU resources          | Unsafe, waste resources       |
| .bold[non-blocking] | Non sensical                         | Holy graal üèÜ                 |
]

<br />

[Latency numbers every programmer should know](https://gist.github.com/guizmaii/6395ad8abf1b1718f4a3128fec81f7ce)
---

# Conclusion


FP helps me to write more delcarative code.

Pure FP help me to write more composable code.
---
class: center, middle

# Thanks!
Code and slides at `guizmaii/LilleFP` on GitHub

## Questions?





</textarea>
<script src="remark-latest.min.js">
</script>
<script>
  const slideshow = remark.create();
</script>
</body>
</html>
